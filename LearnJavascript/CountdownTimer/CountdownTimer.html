<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
		<title>Countdown Timer</title>
		<style type="text/css">

		</style>
	</head>
	
	<body>
		
		<audio id='music'>
		  <source src="music/Windows XP 启动.wav" type="audio/mpeg">
		  Your browser does not support the audio tag.
		</audio>
		
		<audio id='music2'>
		  <source src="music/Windows XP 关机.wav" type="audio/mpeg">
		  Your browser does not support the audio tag.
		</audio>
		
		<script type="text/javascript" >

			var timer = {
				initMinutes:30,
				restSeconds:0,
				minute:0,
				second:0,
				handle:0,
				init:function(){
					var span = document.createElement("span")
					span.style.fontSize = (window.innerWidth
								|| document.documentElement.clientWidth
								|| document.body.clientWidth) / 3 + "px";
					span.style.whiteSpace = "nowrap"//文本内容不换行
					
					this.restSeconds = this.initMinutes * 60 
					this.minute = this.initMinutes
					
					var obj = this
					
					this.handle = setInterval(function(){
						
						if(obj.restSeconds > 0){
							span.innerHTML = "" + (obj.minute < 10 ? "0" + obj.minute : obj.minute) + ":" + (obj.second < 10 ? "0" + obj.second : obj.second)
							
							obj.restSeconds -= 1
						
							obj.minute =  Math.floor(obj.restSeconds / 60)
							obj.second =  obj.restSeconds - obj.minute * 60
							
						}else{
							span.innerHTML = "Time's Up"
							window.clearInterval(obj.handle)
							document.getElementById("music2").play()
							//span.style.fontSize = "1500%"
							
							//不停地闪烁
							window.setInterval(function(){
								span.style.display = (span.style.display=="none"?"initial":"none")
							}, 800)
							
						}
						
					}, 1000)
				
					document.getElementsByTagName('body')[0].appendChild(span)
					document.getElementById("music").play()
				}
			}

			//main
			window.onload = function(){
				timer.init()
			};
		</script>
	</body>
</html> 